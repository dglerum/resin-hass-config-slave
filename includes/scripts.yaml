get_latest_config:
  alias: "Get Master Config"
  sequence:
    - service: shell_command.update_new_commits_sensor
      data:
        api_password: !secret http_password
    - condition: numeric_state
      entity_id: sensor.new_commits
      above: 0
    - service: shell_command.checkout_master_branch_from_github
      data:
        branch: "{{ trigger.to_state.state }}"
    - service: shell_command.update_config_from_github
    - service: homeassistant.restart

get_latest_config:
  alias: "Get Development Config"
  sequence:
    - service: shell_command.update_new_commits_sensor
      data:
        api_password: !secret http_password
    - condition: numeric_state
      entity_id: sensor.new_dev_commits
      above: 0
    - service: shell_command.checkout_dev_branch_from_github
      data:
        branch: "{{ trigger.to_state.state }}"
    - service: shell_command.update_config_from_github
    - service: homeassistant.restart
